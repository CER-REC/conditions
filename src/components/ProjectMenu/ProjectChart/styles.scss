@import '../../../styles/colors.scss';

$pipe-color: $LightGreyBackground;
$condition-circle-bg: #a1a8a7;
$selected-condition-circle-bg: #f15a24;
$condition-circle-font: #fff;
$project-chart-line: #a1a8a7;

.ProjectChart {
  width: 100%;
  height: 300px;
  margin-bottom: 110px;

  .ProjectName {
    text-overflow: ellipsis;
    position: absolute;
    width: 118px;
    bottom: 130px; // Based on the rotation and the width
    right: 50%;
    transform: rotate(-70deg);
    transform-origin: bottom right;
    text-align: right;

    p {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      width: 118px;
    }
  }

  .ConditionPipe {
    height: 30px;
    background-color: $pipe-color;
    text-align: center;

    .ConditionCount {
      background-color: $condition-circle-bg;
      color: $condition-circle-font;
    }
  }

  .FlagWrapper {
    position: relative;
    display: inline-block;
    width: 100%;
    height: calc(100% - 50px); // 100% - pipe
    padding-top: 10px;

    .FlagPole {
      position: absolute;
      top: -6px;
      left: 50%;
      transform: translateX(-50%);

      width: 2px;
      height: 100%;

      background-color: $project-chart-line;
    }

    .FeatureFlag {
      position: relative;
      margin-top: 1px;
      margin-left: 50%;
      width: 50%;
    }
  }

  p {
    margin: 0;
  }

  &.selected {
    .ConditionPipe {
      margin: 0;

      .ConditionCount {
        background-color: $selected-condition-circle-bg;
        color: $condition-circle-font;
        position: relative;
        bottom: 10px;
      }
    }

    .FlagPole {
      top: 0;
      width: 30px;
      background-color: $pipe-color;
    }

    .FeatureFlag {
      // Convert to the same scale as the other charts
      width: calc(50% / 0.4 * 0.15);
    }

    .ProjectName {
      z-index: 1;
      width: 134px;
      height: 30px;
      background: $pipe-color;
      right: calc(50% - 15px);
      &:before {
        content: '';
        background: $pipe-color;
        width: 20px;
        height: 30px;
        display: block;
        position: absolute;
        left: -10px;
        transform: skew(20deg);
      }
    }
  }

  &:not(.selected) .FeatureFlag {
    .Bar { background-color: #a1a8a7 !important; }
    .FlagTip { border-left-color: #a1a8a7 !important; }
  }
}
