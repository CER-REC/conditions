@import '../../../styles/colors.scss';

$pipe-color: $LightGray;
$condition-circle-bg: $Gray160;
$selected-condition-circle-bg: $MainOrange;
$condition-circle-font: $White;
$project-chart-line: $Gray160;

.ProjectChart {
  width: 100%;
  height: 300px;
  margin-bottom: 110px;

  .ProjectName {
    text-overflow: ellipsis;
    position: absolute;
    width: 118px;
    bottom: 137px; // Based on the rotation and the width
    right: 50%;
    transform: rotate(-70deg);
    transform-origin: bottom right;
    text-align: right;

    p {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      width: 118px;
    }
  }

  .ConditionPipe {
    height: 24px;
    background-color: $pipe-color;
    text-align: center;

    .ConditionCount {
      background-color: $Gray160;
      color: $White;
    }
  }

  .FlagWrapper {
    position: relative;
    display: inline-block;
    width: 100%;
    height: calc(100% - 50px); // 100% - pipe
    padding-top: 10px;

    .FlagPole {
      position: absolute;
      top: -6px;
      left: 50%;
      transform: translateX(-50%);

      width: 2px;
      height: 100%;

      background-color: $Gray160;
    }

    .FeatureFlag {
      position: relative;
      margin-top: 1px;
      margin-left: 50%;
      width: 50%;
    }
  }

  p {
    margin: 0;
  }

  &.selected {
    .ConditionPipe {
      margin: 0;

      .ConditionCount {
        background-color: $SearchKeyword;
        color: $White;
        position: relative;
        bottom: 10px;
      }
    }

    .FlagPole {
      top: 0;
      width: 24px;
      background-color: $pipe-color;
    }

    .FeatureFlag {
      // Convert to the same scale as the other charts
      width: calc(50% / 0.4 * 0.15);
    }

    .ProjectName {
      z-index: 1;
      width: 144px;
      height: 24px;
      background: $pipe-color;
      right: calc(50% - 12px);
      &:before {
        content: '';
        background: $LightGreyBackground;
        width: 20px;
        height: 24px;
        display: block;
        position: absolute;
        left: -10px;
        transform: skew(20deg);
      }
    }
  }

  &:not(.selected) .FeatureFlag {
    .Bar { background-color: $Gray160 !important; }
    .FlagTip { border-left-color: $Gray160 !important; }
  }
}
